{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <h2>Ajouter un paiement</h2>
  <form method="post" class="card p-4 shadow">
    {% csrf_token %}
    
 <div class="mb-3">
  <label for="id_proprietaire" class="form-label">Propriétaire</label>
  {{ paiement_form.proprietaire }}
</div>

<div class="mb-3">
  <label for="id_locataire" class="form-label">Locataire</label>
  {{ paiement_form.locataire }}
</div>



    <!-- Date de paiement -->
    <div class="mb-3">
      <label for="id_date_paiement" class="form-label">Date de paiement</label>
      {{ form.date_paiement }}
    </div>

    <!-- Mois concerné -->
    <div class="mb-3">
      <label for="id_mois_concerne" class="form-label">Mois concerné</label>
      {{ form.mois_concerne }}
    </div>

    <!-- Montant -->
    <div class="mb-3">
      <label for="id_montant" class="form-label">Montant</label>
      {{ form.montant }}
    </div>

    <!-- Payé en avance -->
    <div class="form-check mb-3">
      {{ form.paye_en_avance }}
      <label class="form-check-label" for="id_paye_en_avance">Payé en avance</label>
    </div>

    <!-- Bouton -->
    <button type="submit" class="btn btn-primary">Valider</button>
  </form>
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
    const proprietaireSelect = document.getElementById("id_proprietaire");

    // Recharge la page automatiquement quand on choisit un propriétaire
    proprietaireSelect.addEventListener("change", function() {
        const proprietaireId = this.value;
        if (proprietaireId) {
            window.location.href = "?proprietaire=" + proprietaireId;
        } else {
            window.location.href = window.location.pathname;
        }
    });
});
</script>
<script>
document.addEventListener("DOMContentLoaded", function() {
    const proprietaireSelect = document.getElementById("id_proprietaire");

    // Recharge la page automatiquement quand on choisit un propriétaire
    proprietaireSelect.addEventListener("change", function() {
        const proprietaireId = this.value;
        if (proprietaireId) {
            window.location.href = "?proprietaire=" + proprietaireId;
        } else {
            window.location.href = window.location.pathname;
        }
    });
});
</script>


{% endblock %}
